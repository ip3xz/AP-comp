#include <lpc214x.h>

void UART0Init(void)
{
    PINSEL0 |= 0x00000005;
    U0LCR = 0x83;
    U0DLL = 0x62;
    U0DLM = 0x00;
    U0LCR = 0x03;
    U0FCR = 0x07;
}

void UART0_put_char0(unsigned char ch)
{
    if (ch == '\n')
    {
        while (!(U0LSR & 0x20));
        U0THR = 0x0D;
    }
    while (!(U0LSR & 0x20));
    U0THR = ch;
}

void UART0_put_str0(unsigned char *str)
{
    while (*str != '\0')
    {
        UART0_put_char0(*str++);
    }
}

unsigned char UART0_get_char0(void)
{
    while (!(U0LSR & 0x01));
    return U0RBR;
}

void UART1Init(void)
{
    PINSEL0 |= 0x00050000;
    U1LCR = 0x83;
    U1DLL = 0x62;
    U1DLM = 0x00;
    U1LCR = 0x03;
    U1FCR = 0x07;
}

void UART1_put_char1(unsigned char ch)
{
    if (ch == '\n')
    {
        while (!(U1LSR & 0x20));
        U1THR = 0x0D;
    }
    while (!(U1LSR & 0x20));
    U1THR = ch;
}

void UART1_put_str1(unsigned char *str)
{
    while (*str != '\0')
    {
        UART1_put_char1(*str++);
    }
}

unsigned char UART1_get_char1(void)
{
    while (!(U1LSR & 0x01));
    return U1RBR;
}

int main()
{
    unsigned char temp;

    UART0Init();
    UART1Init();

    while (1)
    {
        temp = UART1_get_char1();
        UART0_put_char0(temp);
    }

    return 0;
}
